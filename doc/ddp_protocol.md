# DDP Protocol

The DDP protocol establishes a request-response message exchange between any 2 nodes in a network.
We refer to the host-node as the node sending a request and the client node as the node processing the request and answering with a response.

## Requests

Each request is at least 2-bytes and at most 64-bytes long. It starts with 1 control byte, followed by 0 to 61 data bytes and ends with a CRC16.

Each request addresses an endpoint, encoded using a 7-bit endpoint code in the control byte. Endpoint codes are allocated for application-level protocols, some of which are specified in this document. These protocols are referred to as endpoint protocols and some of the are defined in this document.

Upon receiving and processing a request, the client node answers with a response. Whether a response is to be sent depends on the Response-Request bit set, which is the most significant bit of the control byte.

The final CRC16 is calculated over the control byte, followed by all data bytes. The CRC shall be calculated using the polynomial 0x1021 and initialized with value 0xFFFF.

| Byte | Field | Length | Description |
| --- | --- | --- | --- |
| 0 | Response Request MSB | 1-bit | Determines whether an answer shall be sent by the client node. |
|   | Endpoint Code | 7-bits | Code identifying the endpoint protocol  |
| 1 to N | Data | Up to 61 bytes  | |
| N + 1 | | | |

## Notes

* In a script file generated by this merge tool, the default CRC is included.
    For transport layers already containing error detection/correction it may simply be stripped away.
